<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT, NewVinci, 芬奇网， 芬奇课堂" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="It doesn&apos;t matter.">
<meta property="og:type" content="website">
<meta property="og:title" content="NewVinci">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="NewVinci">
<meta property="og:description" content="It doesn&apos;t matter.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NewVinci">
<meta name="twitter:description" content="It doesn&apos;t matter.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> NewVinci </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">NewVinci</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">越成长越快乐</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/20/deviceone-ch5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="芬奇妞">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NewVinci">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/20/deviceone-ch5/" itemprop="url">
                  《DeviceOne移动应用开发》（五）功能及细节的完善——添加新组件与自定义函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-20T16:05:35+08:00">
                2017-04-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/" itemprop="url" rel="index">
                    <span itemprop="name">系列教程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/移动应用开发/" itemprop="url" rel="index">
                    <span itemprop="name">移动应用开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>上两节课我们完成了页面主框架，本次课我们对页面功能和细节进行进一步的完善，我们要完成的效果图如下：<br><img src="http://doc.deviceone.net/web/img/20160323/9fe2c52ca2d84f4db67c0dd5abff68f7.jpg" alt=""><br>实例源代码戳此<a href="http://doc.deviceone.net/web/zip/20160714/a9665fe0327645dfa7f3fecb4b1787ed.zip" target="_blank" rel="external">下载</a></p>
<h1 id="添加新组件"><a href="#添加新组件" class="headerlink" title="添加新组件"></a>添加新组件</h1><h2 id="添加新组件-1"><a href="#添加新组件-1" class="headerlink" title="添加新组件"></a>添加新组件</h2><p>本课将要用到两个新组件，<code>do_DateTimePicker</code>和<code>do_Picker</code>组件，这两个组件在最初创建应用时没有的，需要从组件商店中添加。在前面的教程中，我们通过IDE新建的项目，会在开发者中心-应用开发创建一个相应的应用。</p>
<p><img src="/uploads/ch5_01.png" alt=""></p>
<p>点击<code>应用配置</code>按钮，进入应用配置页，选择“组件配置”，如下图所示:</p>
<p><img src="/uploads/ch5_02.png" alt=""></p>
<p>在这个页面中展示了你的应用程序中已经添加组件和应用商店中的全部组件。点击<code>全部组件</code>按钮找到你需要的组件，将光标悬停在该选项上，点击<code>+</code>按钮即可以将组件添加到你的应用中。</p>
<p><img src="/uploads/ch5_03.png" alt=""></p>
<p>我们找到<code>do_DateTimePicker</code>和<code>do_Picker</code>组件，将他们添加进应用程序。</p>
<h2 id="同步新组件"><a href="#同步新组件" class="headerlink" title="同步新组件"></a>同步新组件</h2><p>想要在设计器中使用刚刚添加的两个组件，只需要在WorkSpace中选中该应用，再点击一下同步按钮即可。这样我们从商店选择的新组件就可以在设计器中使用了。<br><img src="http://doc.deviceone.net/web/img/20160324/c10b352e90764c2aabeb73349d6ebb93.jpg" alt=""></p>
<h1 id="完成页面布局"><a href="#完成页面布局" class="headerlink" title="完成页面布局"></a>完成页面布局</h1><p>分析一下页面布局，这里我们使用一个线性布局<code>LinearLayout</code>(红框)去包裹四个绝对布局<code>ALayout</code>（蓝框）这四个<code>ALayout</code>的ID从上到下分别设置为<code>do_ALayout_3</code>、<code>do_ALayout_createTime</code>、<code>do_ALayout_type</code>和<code>do_ALayout_7</code>，因为线性布局所有内部子控件都从上向下罗列，保证组件直接紧密排列，每个ALayout中又去分别包裹<code>Label</code>标签组件、<code>TextBox</code>、<code>TextField</code>等用于显示和输入的组件，最底下都有一个<em>height</em>为1，<em>bgColor</em>为灰色的<code>ALayout</code>作为一条分割线。<br><img src="http://doc.deviceone.net/web/img/20160324/2138b4238e584ec6958639c543c077c3.jpg" alt=""></p>
<p>提示：以上需要1个线性布局组件和8个绝对布局组件。</p>
<h1 id="加入交互动画"><a href="#加入交互动画" class="headerlink" title="加入交互动画"></a>加入交互动画</h1><p>我们希望在用户输入反馈信息的标题时呈现一个小的动画效果。<br>在ID为<code>do_ALayout_3</code>的ALayout中，添加一个Label组件（修改ID为<code>do_Label_title</code>）和一个单行文本TextField（修改ID为<code>do_TextField_title</code>），通过给Label设置text属性为“标题”来展示我们想要显示的文字；修改TextField的hint属性为“标题”能让该组件在text属性为空时显示提示信息。<br><img src="http://doc.deviceone.net/web/img/20160324/d90b86820b3d415bb1dff346cb02d4b4.jpg" alt=""><br>我们想让输入文字时有显示“标题”的Label组件有一个向上的动画效果，直接订阅TextField的textChanged事件，这个事件会在text改变时触发，在事件的回调中调用所有UI都有的基类方法show，通过给show方法设置动画类型和动画时间参数，来达到Label的动画效果，需要说明的是，在使用show方法前要保证UI组件的visible是为false的才会有动画效果。同样的效果我们也给放“内容”的Label加上。<br><img src="http://doc.deviceone.net/web/img/20160324/e2fe0ffc2fbf4e2281922473a9b02406.jpg" alt=""></p>
<h1 id="弹出日期选择（使用do-DateTimePicker组件）"><a href="#弹出日期选择（使用do-DateTimePicker组件）" class="headerlink" title="弹出日期选择（使用do_DateTimePicker组件）"></a>弹出日期选择（使用<code>do_DateTimePicker</code>组件）</h1><p>我们想要在点击“反馈时间”的<code>do_ALayout</code>（ID为<code>do_ALayout_createTime</code>）时弹出<code>do_DateTimePicker</code>选择日期，只需要订阅<code>do_ALayout_createTime</code>的touch点击事件，在触发事件的回调中调用<code>do_DateTimePicker</code>的show方法来显示一个日期选择器。</p>
<p><img src="http://doc.deviceone.net/web/img/20160324/0582b47fe021436b928e18fdf2b85293.jpg" alt=""></p>
<p>因为<code>do_DateTimePicker</code>是SM类型的，这里直接通过类型来对组件进行实例化。</p>
<p><img src="http://doc.deviceone.net/web/img/20160324/97624b3fb2f14d46889419c2984d9d1f.jpg" alt=""></p>
<h1 id="直接引用UI页面"><a href="#直接引用UI页面" class="headerlink" title="直接引用UI页面"></a>直接引用UI页面</h1><p>要实现文章顶部的效果图第三张所示效果，我们首先要单独添加一个UI页面，只放一个Picker组件，并将页面的其他地方设置为灰色透明效果。</p>
<p><img src="http://doc.deviceone.net/web/img/20160325/4e4e85b9c25d457a881495cb94483fc2.jpg" alt=""></p>
<p>想要在点击“反馈类型”时该页面直接弹出，只需先添加该页面到main.ui页面中，并按id实例化该页面.</p>
<p><img src="http://doc.deviceone.net/web/img/20160328/095a8691a6b241c79cd05b699bfc4c0e.jpg" alt=""></p>
<p>再订阅<code>do_ALayout_type</code>的touch事件，在事件触发的回调中调用所有UI组件都有的积累方法show来显示组件本身即可完成在一个页面中直接引用另外一个UI页面。<br><img src="http://doc.deviceone.net/web/img/20160328/1867beaa51f64551ba9ca0c3e61caa7e.jpg" alt=""></p>
<h1 id="自定义函数的使用"><a href="#自定义函数的使用" class="headerlink" title="自定义函数的使用"></a>自定义函数的使用</h1><p>页面画完后，我们要做的就是把用户填写的数据提交到后台。在提交数据之前，我们要处理一下用户提交的数据，使用的是自定义函数，必须在source://script目录下新建一个tool.js文件，在该脚本环境中定义自定义函数，并声明这个函数使其能被外部应用。<br><img src="http://doc.deviceone.net/web/img/20160328/68bd11d5f6594486b1564f453f5ed72b.jpg" alt=""></p>
<p>在main.ui.js中require引用一下该方法，就可以在main.ui.js中使用该自定义函数了。</p>
<p><img src="http://doc.deviceone.net/web/img/20160328/5ee289b8666d4b0c8bb6706c2437b734.jpg" alt=""></p>
<p>然后我们使用http的upload方式将用户填写和选择的数据提交到后台处理，整个反馈意见的功能就完成了。</p>
<p><img src="http://doc.deviceone.net/web/img/20160328/85af02fd829143f489382567843cdf87.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/19/deviceone-ch4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="芬奇妞">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NewVinci">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/19/deviceone-ch4/" itemprop="url">
                  《DeviceOne移动应用开发》（四）完善APP页面主框架——容器组件的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-19T11:42:50+08:00">
                2017-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/" itemprop="url" rel="index">
                    <span itemprop="name">系列教程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/移动应用开发/" itemprop="url" rel="index">
                    <span itemprop="name">移动应用开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>文前声明：本文汇编自DeviceOne官方文档，根据需要进行了编辑修改。仅用于教学和知识分享，不做商业用途。<br><a href="http://doc.deviceone.net/web/doc/basic_course/completeFrame.htm" target="_blank" rel="external">戳此查看官方文档</a></p>
</blockquote>
<p>我们在上节课中已经学会了如何<a href="https://newvinci.github.io/2017/04/11/deviceone-ch3/" target="_blank" rel="external">搭建主框架</a>。本节课就是在这个主框架基础上进行进一步的完善。要完成的案例效果如下图所示：<br><img src="http://doc.deviceone.net/web/img/20160317/5ebe33e5f6d34910bb6b518f9943a08d.gif" alt=""><br>本节示例demo请<a href="http://doc.deviceone.net/web/zip/20160714/97e790314e2944d6b40ad710dd0fadcb.zip" target="_blank" rel="external">戳此下载</a>。<br>我们使用上节课完成的例子来继续做。</p>
<p>我们分析一下这个demo，通过效果图可以看出，其目标是通过点击Bottom Bar上的不同按钮来切换内容。这种情况下最适合用<code>ViewShower</code>这个组件，ViewShower是一个包含多个子View的UI容器组件。详情参考<a href="http://store.deviceone.net/store-detail.html?name=do_ViewShower&amp;version=2.1&amp;chineseName=多视图切换容器(UI" target="_blank" rel="external">多视图切换容器</a>)。</p>
<h1 id="完善主框架"><a href="#完善主框架" class="headerlink" title="完善主框架"></a>完善主框架</h1><h2 id="第一步：添加ViewShower组件并设置属性"><a href="#第一步：添加ViewShower组件并设置属性" class="headerlink" title="第一步：添加ViewShower组件并设置属性"></a>第一步：添加<code>ViewShower</code>组件并设置属性</h2><p>我们从组件列表里拖一个<code>ViewShower</code>到UI设计页面中，并通过调整<code>x/y/width/height</code>的值分别为“<code>0,0,750,1109</code>”，将其固定在body的位置，把组件ID改为<code>do_ViewShower_main</code>。<br><img src="/uploads/do_ch4_1.png" alt=""></p>
<h2 id="第二步：实例化ViewShower组件"><a href="#第二步：实例化ViewShower组件" class="headerlink" title="第二步：实例化ViewShower组件"></a>第二步：实例化<code>ViewShower</code>组件</h2><p>双击index.ui.js打开代码编辑页面，先通过ID实例化ViewShower组件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//引入组件库</span></div><div class="line"><span class="keyword">var</span> do_Notification = sm(<span class="string">"do_Notification"</span>);</div><div class="line"><span class="keyword">var</span> do_Global = sm(<span class="string">"do_Global"</span>);</div><div class="line"><span class="keyword">var</span> do_App = sm(<span class="string">"do_App"</span>);</div><div class="line"><span class="keyword">var</span> do_Page = sm(<span class="string">"do_Page"</span>);</div><div class="line"><span class="comment">//声明UI变量</span></div><div class="line"><span class="keyword">var</span> do_ALayout_root=ui(<span class="string">"do_ALayout_root"</span>);</div><div class="line"><span class="keyword">var</span> do_ALayout_b0=ui(<span class="string">"do_ALayout_b0"</span>);</div><div class="line"><span class="keyword">var</span> do_ALayout_b1=ui(<span class="string">"do_ALayout_b1"</span>);</div><div class="line"><span class="keyword">var</span> do_ALayout_b2=ui(<span class="string">"do_ALayout_b2"</span>);</div><div class="line"><span class="keyword">var</span> do_ALayout_b3=ui(<span class="string">"do_ALayout_b3"</span>);</div><div class="line"><span class="keyword">var</span> do_ImageView_b0=ui(<span class="string">"do_ImageView_b0"</span>);</div><div class="line"><span class="keyword">var</span> do_ImageView_b1=ui(<span class="string">"do_ImageView_b1"</span>);</div><div class="line"><span class="keyword">var</span> do_ImageView_b2=ui(<span class="string">"do_ImageView_b2"</span>);</div><div class="line"><span class="keyword">var</span> do_ImageView_b3=ui(<span class="string">"do_ImageView_b3"</span>);</div><div class="line"><span class="keyword">var</span> do_Label_b0=ui(<span class="string">"do_Label_b0"</span>);</div><div class="line"><span class="keyword">var</span> do_Label_b1=ui(<span class="string">"do_Label_b1"</span>);</div><div class="line"><span class="keyword">var</span> do_Label_b2=ui(<span class="string">"do_Label_b2"</span>);</div><div class="line"><span class="keyword">var</span> do_Label_b3=ui(<span class="string">"do_Label_b3"</span>);</div><div class="line"><span class="comment">//实例化do_ViewShower_main组件。</span></div><div class="line"><span class="keyword">var</span> do_ViewShower_main=ui(<span class="string">"do_ViewShower_main"</span>);</div></pre></td></tr></table></figure>
<h2 id="第三步：给ViewShower绑定数据"><a href="#第三步：给ViewShower绑定数据" class="headerlink" title="第三步：给ViewShower绑定数据"></a>第三步：给ViewShower绑定数据</h2><p>在DeviceOne的组件库中，<code>ViewShower</code>、<code>ListView</code>等这种容器类都是采用MVVM形式来绑定数据的，使得开发人员可以将View和业务逻辑分离出来。在这个课程中我们不讨论什么是MVVM，感兴趣的同学可以自行百度。<br><img src="http://doc.deviceone.net/web/img/20160317/bbc23dfcb4d9495290fd2f99383bf54c.jpg" alt=""></p>
<h3 id="首先，定义要绑定的数据"><a href="#首先，定义要绑定的数据" class="headerlink" title="首先，定义要绑定的数据"></a>首先，定义要绑定的数据</h3><p>先给<code>ViewShower</code>定义需要绑定的数据<code>viewShower_data</code>，这里有两个参数需要说明。<code>id</code>需要保持唯一，否则后id已经存在，会覆盖之前的View；<code>path</code>为需要展示的子View所在的UI页面的绝对路径。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//绑定ViewShower的3个子页面</span></div><div class="line"><span class="keyword">var</span> viewShower_data = [ </div><div class="line">	&#123;</div><div class="line">		<span class="string">"id"</span> : <span class="string">"news"</span>,</div><div class="line">		<span class="string">"path"</span> : <span class="string">"source://view/news/main.ui"</span></div><div class="line">	&#125;, </div><div class="line">	&#123;</div><div class="line">		<span class="string">"id"</span> : <span class="string">"contact"</span>,</div><div class="line">		<span class="string">"path"</span> : <span class="string">"source://view/contact/main.ui"</span></div><div class="line">	&#125;, </div><div class="line">	&#123;</div><div class="line">		<span class="string">"id"</span> : <span class="string">"find"</span>,</div><div class="line">		<span class="string">"path"</span> : <span class="string">"source://view/find/main.ui"</span></div><div class="line">	&#125;</div><div class="line">];</div></pre></td></tr></table></figure>
<blockquote>
<p>此时path所指的三个页面还不存在，等一下来创建。</p>
</blockquote>
<h3 id="然后，绑定数据并设置默认显示页面"><a href="#然后，绑定数据并设置默认显示页面" class="headerlink" title="然后，绑定数据并设置默认显示页面"></a>然后，绑定数据并设置默认显示页面</h3><p>定义好数据后，通过 <code>ViewShower</code>的<code>addViews</code>方法将数据绑定进去。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">do_ViewShower_main.addViews(viewShower_data);</div></pre></td></tr></table></figure>
<p>调用<code>showView</code>方法使其先默认显示第一个页面，即id为”news”的子页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//默认显示第1个页面</span></div><div class="line">do_ViewShower_main.showView(<span class="string">"news"</span>);</div></pre></td></tr></table></figure>
<h3 id="最后，在按钮的touch事件中添加切换子view的代码"><a href="#最后，在按钮的touch事件中添加切换子view的代码" class="headerlink" title="最后，在按钮的touch事件中添加切换子view的代码"></a>最后，在按钮的<code>touch</code>事件中添加切换子view的代码</h3><p>换子View的方法showView，并通过show不同id的子View来切换页面。<br><img src="http://doc.deviceone.net/web/img/20160317/c50360a66ebb448398f8024559e21e1b.jpg" alt=""></p>
<h1 id="完成viewShower子视图"><a href="#完成viewShower子视图" class="headerlink" title="完成viewShower子视图"></a>完成<code>viewShower子视图</code></h1><p>前面我们虽然为主页面添加了<code>viewShower</code>组件，并绑定了数据，但其中的<code>path</code>所指向的<code>UI</code>文件是不存在的，我们必须创建这些文件，才能够正确显示。<br><img src="http://doc.deviceone.net/web/img/20160317/e2b954d244c1459093e14d7bb018ada8.jpg" alt=""></p>
<ol>
<li><strong>新建第一个子视图</strong>：在<code>view</code>目录上点击右键，选择<code>New</code>-<code>Folder</code>，填写要创建的目录名称为<code>”news”</code>，新建后再在<code>news</code>目录上点击右键，选择<code>New</code>-<code>UI File</code>，新建名称为<code>“main”</code>的UI界面，在创建页面的同时IDE会同时创建一个跟<code>main.ui</code>关联的代码文件<code>main.ui.js</code>。</li>
<li><strong>子视图布局</strong>：双击打开main.ui文件，向页面的最外层<code>ALayout</code>中再拖进一个<code>ALayout</code>组件作为<code>viewShower</code>子View的最外层容器，修改它的id为<code>do_ALayout_main</code>，调整高度为“1109”，因为在主页面<code>index.ui</code>中<code>viewShower</code>的高度也为“1109”，<strong>如果子View的宽高超过它父容器<code>viewShower</code>的宽高会导致内容显示不全的问题</strong>。<img src="http://doc.deviceone.net/web/img/20160317/9b06cfd64e6f4121abd203cacc4b2be7.jpg" alt=""></li>
<li><strong>子视图内容添加</strong>：再向该页面的<code>o_ALayout_main</code>d中拖拽一个<code>Label</code>，修改<code>Label</code>的<code>text</code>为“新闻”。这样<code>viewShower</code>的一个子View就完成了。</li>
<li><strong>快速创建其他子视图</strong>：其他两个子View也是相同内容，所以只需<strong>复制</strong>该页面即可，在<code>news</code>目录上点击右键，选择<code>Copy</code>,再点击<code>View</code>目录选择<code>Paste</code>，填写目录名为“find”；打开<code>main.ui</code>修改<code>Label</code>的<code>text</code>为“搜索”即可；同样的再复制、粘贴一次，修改目录名为“contact”、<code>Label</code>的<code>text</code>为“通讯录”，这样<code>viewShower</code>的三个子View就完成了。（再多复制一份，目录名改成“feedback”，Label的text为“反馈”，为后续做准备。）</li>
</ol>
<p>通过以上步骤，我们点击“<code>新闻</code>”、“<code>通讯录</code>”、“<code>发现</code>”按钮就可以实现子视图的切换了。</p>
<h1 id="新页面的打开与关闭"><a href="#新页面的打开与关闭" class="headerlink" title="新页面的打开与关闭"></a>新页面的打开与关闭</h1><p>在Bottom Bar中，我们想通过点击第四个按钮“<code>反馈</code>”来另外打开一个新页面，让用户填写反馈信息。</p>
<h2 id="UI实现"><a href="#UI实现" class="headerlink" title="UI实现"></a>UI实现</h2><p>先双击打开<code>feedback</code>目录中的<code>main.ui</code>文件，在<code>do_ALayout_main</code>中继续添加一个<code>ALayout</code>作为该页面的top，ID改为<code>do_ALayout_1</code>，调整宽高分别为<code>750/128</code>；再向<code>do_ALayout_1</code>中添加一个<code>ALayout</code>用于点击，ID改为<code>do_ALayout_back</code>，调整位置、宽高分别为<code>x=4，y=6，width=147，height=110</code>；再向<code>do_ALayout_back</code>中添加一个<code>Label</code>用于展示文字，ID改为<code>do_Label_3</code>，将<code>Label</code>的<code>text</code>改为“返回”。<br><img src="http://doc.deviceone.net/web/img/20160317/6e9fecedea5a40038354df072951016c.jpg" alt=""></p>
<h2 id="功能逻辑实现"><a href="#功能逻辑实现" class="headerlink" title="功能逻辑实现"></a>功能逻辑实现</h2><h3 id="新页面的关闭"><a href="#新页面的关闭" class="headerlink" title="新页面的关闭"></a>新页面的关闭</h3><p>打开<code>main.ui.js</code>，订阅<code>do_ALayout_back</code>的点击事件用于关闭该页面。同时处理在点击<code>android</code>设备的虚拟<code>返回</code>按钮时也关闭该页面。<br><img src="http://doc.deviceone.net/web/img/20160317/e04780e06fa94f758900e9e06586f726.jpg" alt=""></p>
<h3 id="新页面的打开"><a href="#新页面的打开" class="headerlink" title="新页面的打开"></a>新页面的打开</h3><p>上面已经将feedback页面的UI界面和相应的功能完成，但是现在是不可用的状态，因为我们无法从主页面打开刚刚新建的这个feedback页面，它们之间没有建立任何关联。</p>
<p>回到<code>index.ui.js</code>，在<code>do_ALayout_b3</code>的<code>touch</code>事件中调用app的<code>openPage</code>方法，将目标地址指向刚刚调整过的“<code>/feedback/main.ui</code>”页面，将顶部状态栏显示状态改为透明（控制<code>statusBarState</code>参数为“transparent”），以全屏形式打开新页，同时将打开页面的动画类型（<code>animationType</code>）改成从右往左推出（“push_r2l”）。<br><img src="http://doc.deviceone.net/web/img/20160317/ff5f06502b3f4300a6fa3bcb226f1447.jpg" alt=""></p>
<h1 id="为APP添加启动动画"><a href="#为APP添加启动动画" class="headerlink" title="为APP添加启动动画"></a>为APP添加启动动画</h1><p>为了让app有更生动的效果，我们让demo一进入的时候有一个动画效果作为欢迎页面。</p>
<h2 id="UI实现-1"><a href="#UI实现-1" class="headerlink" title="UI实现"></a>UI实现</h2><p>在<code>source://view</code>下创建一个和<code>index.ui</code>平级的<code>start.ui</code>页面，在根<code>ALayout</code>里添加一个与根<code>ALayout</code>一样大小的<code>ImageView</code>，将ID改为<code>do_ImageView_content</code>,设置<code>ImageView</code>的<code>source</code>属性以显示图片；再添加一个<code>Label</code>组件，修改ID为<code>do_Label_welcome</code>，修改<code>do_Label_welcome</code>的<code>fontColor/fontSize</code>属性调整显示字体的颜色和大小，页面就完成了。<br><img src="http://doc.deviceone.net/web/img/20160317/b5d8ff0c7e7c49ce9ec75ff3d684d3e9.jpg" alt=""></p>
<h2 id="功能逻辑实现-1"><a href="#功能逻辑实现-1" class="headerlink" title="功能逻辑实现"></a>功能逻辑实现</h2><ol>
<li>双击打开<code>start.ui.js</code>页面，先实例化当前页面的UI组件，并定义需要使用到的相关组件。</li>
<li>实例化一个MM组件<code>Animation</code>用于调用UI组件的动画，这个动画是控制ImageView组件的，所以我们可以将其定义为img_anima，这样更可以体现命名的语义性。</li>
<li>通过修改img_anima的属性和方法可以控制动画的播放方式。有关<code>Animation</code>组件的使用请<a href="http://store.deviceone.net/store-detail.html?name=do_Animation&amp;version=1.4&amp;chineseName=动画组合(MM" target="_blank" rel="external">参考</a>)。 <br> <img src="http://doc.deviceone.net/web/img/20160317/2b07c023736345c083916d145cfe7b86.jpg" alt=""></li>
<li>接下来也是同样的方法给<code>Label</code>定义一个旋转的动画。</li>
<li>最后通过调用所有UI组件都通用的<code>animate</code>方法,将定义的这些动画加载到UI组件上并在动画完成后打开新页<code>index.ui</code>。<br><img src="http://doc.deviceone.net/web/img/20160317/7ff124f9036e4b328e4a1f92bd0cd4ee.jpg" alt=""></li>
</ol>
<p>本节课仅以<code>ViewShower</code>为例介绍容器类组件，更多详细内容请参考<a href="http://doc.deviceone.net/web/doc/detail_course/uicontainer.htm" target="_blank" rel="external">进阶教程</a>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/11/deviceone-ch3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="芬奇妞">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NewVinci">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/11/deviceone-ch3/" itemprop="url">
                  《DeviceOne移动应用开发》（三）搭建APP页面主框架——布局组件的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-11T19:10:03+08:00">
                2017-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/" itemprop="url" rel="index">
                    <span itemprop="name">系列教程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/移动应用开发/" itemprop="url" rel="index">
                    <span itemprop="name">移动应用开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>文前声明：本文汇编自DeviceOne官方文档，根据需要进行了编辑修改。仅用于教学和知识分享，不做商业用途。<br><a href="http://doc.deviceone.net/web/doc/basic_course/buildFrame.htm" target="_blank" rel="external">戳此查看官方文档</a></p>
</blockquote>
<p>通过上一课的学习，大家已经掌握了如何通过dodebuger来跟PC上的do studio IDE联调来实时查看UI设计效果、调试代码了，接下来我们通过一系列的案例教学来学习如何开发一个真正的App。</p>
<p>这节课我们将要实现的demo效果如下<img src="http://doc.deviceone.net/web/img/20160317/f1644636f3b64995a34d88e93e736abc.jpg" alt=""></p>
<p>大家可以导入<a href="http://doc.deviceone.net/web/zip/20160714/87fb237ab2ad4fffb85acf4c46ed4165.zip" target="_blank" rel="external">示例代码</a>来学习研究如何实现这个效果。这个文件是一个zip包，需要解压，解压后其内部文件目录如下：<br><img src="http://doc.deviceone.net/web/img/20160310/092bfb463ab74857bdd18b30fd7b615f.jpg" alt=""><br>导入方法如下：</p>
<blockquote>
<p>在IDE中选择<code>File</code>-<code>Import</code>-<code>DeviceOne</code>-<code>Existing projects into Workspace</code>点击<code>Next</code>选择刚刚解压后的目录，再次点击<code>Next</code>即可将完整的示例代码导入。</p>
</blockquote>
<h1 id="应用程序的脚本入口app-js"><a href="#应用程序的脚本入口app-js" class="headerlink" title="应用程序的脚本入口app.js"></a>应用程序的脚本入口app.js</h1><p><code>app.js</code>是整个项目的入口脚本环境，我们的应用程序就是从这里开始运行的。<br>双击该文件进入编辑界面。</p>
<p><img src="http://doc.deviceone.net/web/img/20160309/7dc8eced257f46f68e7c845669fccc83.jpg" alt=""></p>
<p>现在来分析一下如何完成这个入口脚本的编写。</p>
<p>先说我们的目标，是希望应用程序在加载的时候打开APP的主页面。</p>
<p>要想实现这个功能必须要订阅<code>do_App</code>组件的<code>loaded</code>事件，然后在<code>loaded</code>事件触发时调用其<code>openPage</code>方法，以打开指定页面。</p>
<h2 id="第一步：-require-“deviceone”"><a href="#第一步：-require-“deviceone”" class="headerlink" title="第一步： require(“deviceone”)"></a>第一步： require(“deviceone”)</h2><p>需要注意的是<code>app.js</code>不同于<code>ui</code>文件的<code>随行脚本</code>（这是我自己创的词），如果要在该文件内使用DeviceOne的组件，需要先require(“DeviceOne”)，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> d1 = <span class="built_in">require</span>(<span class="string">"deviceone"</span>);</div></pre></td></tr></table></figure>
<p>而其他.js脚本环境是不需要引用可以直接使用的。</p>
<h2 id="第二步：实例化App组件，并订阅loaded事件"><a href="#第二步：实例化App组件，并订阅loaded事件" class="headerlink" title="第二步：实例化App组件，并订阅loaded事件"></a>第二步：实例化App组件，并订阅<code>loaded</code>事件</h2><p>成功require(“deviceone”)之后，就可以订阅App的<code>loaded</code>事件了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> do_App = d1.sm(<span class="string">"do_App"</span>);</div><div class="line">do_App.on(<span class="string">"loaded"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="comment">//在加载时要完成的操作写在这里</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="第三步：使用openPage方法打开主页面"><a href="#第三步：使用openPage方法打开主页面" class="headerlink" title="第三步：使用openPage方法打开主页面"></a>第三步：使用<code>openPage</code>方法打开主页面</h2><p>打开一个页面要用到的<code>openPage</code>方法。<br><code>openPage</code>总共有八个参数，这里先简单介绍用到的其中三个，其他参数的用法详见App的openPage<a href="http://component.deviceone.net/documents/do_App/1.5.html#openPage" target="_blank" rel="external">戳这里</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> do_App = d1.sm(<span class="string">"do_App"</span>);</div><div class="line">do_App.on(<span class="string">"loaded"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">do_App.openPage(&#123;</div><div class="line">    <span class="attr">source</span>: <span class="string">"source://view/index.ui"</span>,</div><div class="line">    <span class="attr">statusBarState</span>: <span class="string">"transparent"</span>,</div><div class="line">    <span class="attr">animationType</span>: <span class="string">"fade"</span></div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong> <code>openPage</code>方法参数简介：</strong></p>
<ul>
<li>source表示的是需要打开的页面的地址（绝对路径），我们可以通过改变这个参数的值来改变APP的启动页面；</li>
<li>statusBarState参数表示的是顶部状态栏显示状态，这里选择的是transparent，这样设置能让打开的index.ui页在手机上显示的为全屏效果，即隐藏手机的顶部状态栏；</li>
<li>animationType参数表示的是打开页面时的过渡动画类型，这里选择fade淡入淡出的方式，这样就能以淡入淡出的过渡动画全屏打开到index.ui页面了。</li>
</ul>
<p>以上设置即可实现我们希望的功能。</p>
<h1 id="搭建主页面框架"><a href="#搭建主页面框架" class="headerlink" title="搭建主页面框架"></a>搭建主页面框架</h1><p>我们的主页面是<code>index.ui</code>,进入设计视图来编辑它。<br><img src="http://doc.deviceone.net/web/img/20160309/6b8df29e49a14df196eb83c7c0a23fcc.jpg" alt=""></p>
<p>所有的页面展示都是通过在.ui文件中罗列组件来实现，如上图绿框所示；若需要添加ui组件，只需在组件列表<code>Components</code>（红框所示）中拖拽组件到ui画布上，黄框<code>OutLine</code>中展示的是当前页面的层级关系，在<code>OutLine</code>中越靠下面的组件会展示在页面越上层。</p>
<h2 id="第一步：界面分析"><a href="#第一步：界面分析" class="headerlink" title="第一步：界面分析"></a>第一步：界面分析</h2><p>再简单分析一下主界面，整个项目的尺寸是iphone6的尺寸750x1334，分上下两个部分，底部是一个Bottom Bar导航栏，上面是随着底部导航切换的界面<br><img src="http://doc.deviceone.net/web/img/20160310/fe45545c353b450b973043692ffb685c.jpg" alt=""></p>
<h2 id="第二步：使用do-ALayout组件进行布局"><a href="#第二步：使用do-ALayout组件进行布局" class="headerlink" title="第二步：使用do_ALayout组件进行布局"></a>第二步：使用<code>do_ALayout</code>组件进行布局</h2><p>打开<code>OutLine</code>，在RootView中只允许有一个容器类组件，其他组件都是放在这个容器类组件中的。<br><img src="http://doc.deviceone.net/web/img/20160310/17cfe998fd884bfaa81796109e0410a6.jpg" alt=""></p>
<ol>
<li>添加一个<code>ALayout</code>绝对布局组件来当这个容器组件；</li>
<li>我们点击选中该组件，通过属性列表修改该组件的id为<code>do_ALayout_root</code>，默认大小是跟整个项目的大小相同的<code>750x1334</code>；</li>
<li>再继续向该容器内添加四个ALayout，id分别修改成<code>do_ALayout_top</code>、<code>do_ALayout_body</code>、<code>do_ALayout_line</code>和<code>do_ALayout_bottom</code>，它们的id对应了它们的功能。分别调整四个ALayout的x、y、width、height属性，以调整它们在页面中的位置；</li>
<li>再继续向<code>do_ALayout_bottom</code>容器中添加四个ALayout，id分别改为<code>do_ALayout_b0/b1/b2/b3</code></li>
</ol>
<h2 id="第三步：添加触摸功能图标"><a href="#第三步：添加触摸功能图标" class="headerlink" title="第三步：添加触摸功能图标"></a>第三步：添加触摸功能图标</h2><p>再分别向do_ALayout_b0/b1/b2/b3这四个ALayout中各添加一个Label和ImageView组件，然后更改其id属性，结构如下：<br><img src="http://doc.deviceone.net/web/img/20160310/c3d9850202be4ed39a9fa17a79b91daa.jpg" alt=""><br>然后调整它们的<code>x、y、width、height</code>属性以达到下图所示效果。<br><img src="http://doc.deviceone.net/web/img/20160310/6ec043d82c2c45aea8f38593fe4a45f2.jpg" alt=""></p>
<p>此时你的项目中ImageView没有显示出图片，需要将需要展示的图片存放到<code>source://image</code>目录下。<br>再分别选中四个ImageView组件，修改它们的<code>source</code>属性指向存放图片的绝对路径，就能显示图片了。</p>
<blockquote>
<p>这里需要注意的是，DeviceOne有强大的屏幕适配技术，但可能会在某些局部对图片显示形状要求严格的地方会稍微有些变形，为了保证点ALayout有一个特殊属性isStretch，这里将该属性设置成false来保证ImageView不变形。</p>
</blockquote>
<h1 id="实现页面交互"><a href="#实现页面交互" class="headerlink" title="实现页面交互"></a>实现页面交互</h1><p>有了页面效果，接下来就需要使页面动起来。双击index.ui.js进入代码编辑页，<br><img src="http://doc.deviceone.net/web/img/20160310/3a7846780640484bbed3844cc51f9df6.jpg" alt=""></p>
<h2 id="第一步：组件对象的实例化"><a href="#第一步：组件对象的实例化" class="headerlink" title="第一步：组件对象的实例化"></a>第一步：组件对象的实例化</h2><ol>
<li>先通过组件类型定义三个sm组件<code>Notification</code>、<code>Global</code>和<code>Page</code>，在需要的地方可以通过<code>自定义对象名+.</code>的方式来使用该组件的<code>属性</code>、<code>方法</code>和<code>事件</code>。</li>
<li>再将所需要用到的<code>ALayout</code>、<code>ImageView</code>、<code>Label</code>定义一下。ui组件的定义方式跟sm组件类似，不同的是<code>ui(“”)</code>括号里填的是刚刚在.ui页面修改的对应组件的id名。<br><blockquote>
<p>必须要将组件对象给实例化（也就是上面说的定义），只有实例化后才能够在<code>js</code>脚本中使用。</p>
</blockquote>
</li>
</ol>
<h2 id="第二步：订阅touch事件并实现交互效果"><a href="#第二步：订阅touch事件并实现交互效果" class="headerlink" title="第二步：订阅touch事件并实现交互效果"></a>第二步：订阅<code>touch</code>事件并实现交互效果</h2><p><code>ImageView</code>和<code>ALayout</code>都有点击事件（<code>touch</code>），为了让用户有更好的体验，我们加大点击响应范围，将<code>touch</code>事件订阅在Bottom的四个ALayout中，并在该事件中通过改变其他ALayout里<code>Label</code>的文字颜色和<code>ImageView</code>图片<code>source</code>来达到点击选中的效果。<br><img src="http://doc.deviceone.net/web/img/20160310/0673373b3f3741bbb6c64bcf613066bd.jpg" alt=""></p>
<h2 id="第三步：实现APP的退出功能"><a href="#第三步：实现APP的退出功能" class="headerlink" title="第三步：实现APP的退出功能"></a>第三步：实现APP的退出功能</h2><p>我们想让这个demo在android设备上能通过点击手机上的“<code>返回</code>”虚拟按键来返回到debug首页（实际上就是退出APP），需要用到刚刚我们定义过的<code>Notification、Global 和 Page</code>组件，还有一个mm组件<code>Timer</code>定时器，mm组件的定义方式跟sm组件相同，只需要组件类型即可定义。<br>点击android手机上的“<code>返回</code>”虚拟按键会触发<code>Page</code>组件的<code>back</code>事件，所以我们订阅<code>back</code>事件并在<code>back</code>事件里处理返回还是退出。<br><img src="http://doc.deviceone.net/web/img/20160310/9657e61dd1484233b9ed4844d7ede04a.jpg" alt=""><br>到这里，一个能响应点击事件并切换图片的demo就完成了。</p>
<p>需要跟大家说明的是，<code>deviceone</code>的布局组件不止有<code>ALayout</code>一种，有关更多布局类组件的知识，请参考<a href="http://doc.deviceone.net/web/doc/detail_course/layout.htm" target="_blank" rel="external">官方进阶教程</a>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/11/deviceone-ch2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="芬奇妞">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NewVinci">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/11/deviceone-ch2/" itemprop="url">
                  《DeviceOne移动应用开发》（二）创建你的第一个移动应用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-11T10:55:51+08:00">
                2017-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/" itemprop="url" rel="index">
                    <span itemprop="name">系列教程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/移动应用开发/" itemprop="url" rel="index">
                    <span itemprop="name">移动应用开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>上一次我们讲了如何下载和安装do studio，并且简单介绍了do studio的功能。今天我们就打开这个软件，正式开始我们的app开发之旅。</p>
<h1 id="创建应用"><a href="#创建应用" class="headerlink" title="创建应用"></a>创建应用</h1><h2 id="初始化开发环境"><a href="#初始化开发环境" class="headerlink" title="初始化开发环境"></a>初始化开发环境</h2><ol>
<li><p>启动do studio，弹出如下对话框<img src="/uploads/start.jpg" alt="">在这里设置你的workspace路径，用于存放你的应用代码及其他文件。<br>注意：一定要选择安全性要求低、且不太深的目录。</p>
</li>
<li><p>点击<code>OK</code>进入IDE主界面。</p>
</li>
</ol>
<h2 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h2><p>我们要创建一个应用，实际上就是新建一个项目。</p>
<ol>
<li>点击<code>File</code>-<code>New</code>-<code>DeviceOne Project</code>(等价的操作有对应的工具栏按钮、右键菜单命令等，自己习惯用什么就用什么)：<img src="http://doc.deviceone.net/web/img/20160301/ab6ca9ede77746e3b99095dbbd7677f0.png" alt=""></li>
<li>在弹出的对话框中设置你的应用基本参数：<img src="/uploads/newpro.jpg" alt=""></li>
<li>点击<code>finish</code>会要求你输入开发者账号及密码进行登录，这是因为在开发的过程中需要联网，用到一些官方平台的资源，这是必要的，不登录是没有办法成功新建项目的。如果没有开发者账号，可以注册，很简单：<img src="/uploads/login.jpg" alt=""></li>
</ol>
<h1 id="项目文件结构"><a href="#项目文件结构" class="headerlink" title="项目文件结构"></a>项目文件结构</h1><p>成功新建一个项目后，会自动生成一些代码和相应的文件目录，<img src="http://doc.deviceone.net/web/img/20160529/a056e80c1daa409188f6923cd01f5235.png" alt=""></p>
<p>在这里简单介绍一下项目的文件结构和文件类型。</p>
<h2 id="initdata目录"><a href="#initdata目录" class="headerlink" title="initdata目录"></a>initdata目录</h2><p>该目录存放一些<strong>只读</strong>文件，该目录下所有文件路径以<code>initdata://</code>为前缀。APP运行时可以通过<code>do_InitData</code>组件来读取该目录下的文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//以do_InitData来读文件内容</span></div><div class="line"><span class="keyword">var</span> initdata = sm(<span class="string">"do_InitData"</span>);</div><div class="line">initdata.readFile(<span class="string">"initdata://test.txt"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    deviceone.print(data);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="source目录"><a href="#source目录" class="headerlink" title="source目录"></a>source目录</h2><p>该目录存储APP的源文件，该目录下所有文件路径以<code>source://</code>为前缀。默认含有image、script、view三个子文件夹和一个app.js文件。通过文件夹名称就可以猜测其中包含的文件类型。许多组件的属性和参数可以以该目录下的文件名为值。比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//do_ImageView以source下的图片为源</span></div><div class="line"><span class="keyword">var</span> imageview = ui(<span class="string">"imageview_id1"</span>);</div><div class="line">imageview.source = <span class="string">"source://image/test.png"</span>;</div></pre></td></tr></table></figure>
<p>该目录下的代码文件可以根据用户的选择来进行自动加密，加密可以在打包应用时进行。</p>
<h3 id="source-image子目录"><a href="#source-image子目录" class="headerlink" title="source/image子目录"></a>source/image子目录</h3><p>APP中用到的图片资源文件放在这里。初始为空。</p>
<h3 id="source-script子目录"><a href="#source-script子目录" class="headerlink" title="source/script子目录"></a>source/script子目录</h3><p>自定义的js模块放在这里面。初始为空。</p>
<h3 id="source-view子目录"><a href="#source-view子目录" class="headerlink" title="source/view子目录"></a>source/view子目录</h3><p>大家可以看到该目录下默认生成了两个文件:<code>index.ui</code>和<code>index.ui.js</code>，我们分别来介绍一下这两个类型的文件。</p>
<h4 id="ui文件"><a href="#ui文件" class="headerlink" title="*.ui文件"></a>*.ui文件</h4><p>在deviceone项目中，所有的用户界面都是ui扩展名的文件，双击文件，即可通过设计视图打开，以所见即所得的方式查看效果并设计。<img src="http://doc.deviceone.net/web/img/20160306/15f43570fac149e18181cc4b54c7991b.png" alt=""></p>
<p>ui文件的本质是一个<code>json</code>文件（如下图所示），可以通过任何文本编辑器打开，但是最好不要直接使用文本编辑器修改，可能会导致无法使用设计视图打开。<img src="http://doc.deviceone.net/web/img/20160306/4ffac32fc68e4463b207398ddb477edc.png" alt=""></p>
<h4 id="ui-js文件"><a href="#ui-js文件" class="headerlink" title="*.ui.js文件"></a>*.ui.js文件</h4><p>每个ui文件都对应一个自身的js文件，比如<code>index.ui</code>对应的<code>index.ui.js</code>。这种js文件和标准js文件的差异在于：</p>
<ol>
<li>它可以获取到对应ui文件的上下文环境，可以根据id获取ui对象；</li>
<li>它自动加载了deviceone.js这个核心js库。而其它标准的js文件需要显式的require这个deviceone.js核心库。</li>
</ol>
<p>对比以下两个代码片段:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//test.ui文件对应的js文件 test.ui.js</span></div><div class="line"><span class="comment">//类似html的getElementById("imageview_id1"),"imageview_id1"这个是对应的test.ui文件里某个ui组件的id属性值。</span></div><div class="line"><span class="keyword">var</span> imageview = ui(<span class="string">"imageview_id1"</span>);</div><div class="line"><span class="keyword">var</span> storage = sm(<span class="string">"do_Storage"</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//标准js文件 test.js</span></div><div class="line"><span class="comment">//显式的加载核心js库</span></div><div class="line"><span class="keyword">var</span> d1 = <span class="built_in">require</span>(<span class="string">"deviceone"</span>);</div><div class="line"><span class="keyword">var</span> imageview = d1.ui(<span class="string">"imageview_id1"</span>);</div><div class="line"><span class="keyword">var</span> storage = d1.sm(<span class="string">"do_Storage"</span>);</div></pre></td></tr></table></figure>
<h3 id="source-app-js文件"><a href="#source-app-js文件" class="headerlink" title="source/app.js文件"></a>source/app.js文件</h3><p>APP运行时的入口文件，类似其它语言的<code>main</code>函数。<br>通常APP运行时先加载这个文件，触发 loaded事件（load是加载的意思），在这个事件里打开APP的首页。首页缺省是<code>source://view/index.ui</code>页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//app.js</span></div><div class="line"><span class="keyword">var</span> d1 = <span class="built_in">require</span>(<span class="string">"deviceone"</span>);</div><div class="line"><span class="keyword">var</span> app = d1.sm(<span class="string">"do_App"</span>);</div><div class="line">app.on(<span class="string">"loaded"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    app.openPage(&#123;</div><div class="line">        <span class="attr">source</span> : <span class="string">"source://view/index.ui"</span>,</div><div class="line">        <span class="attr">statusBarState</span> : <span class="string">"transparent"</span></div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>温馨提示：其它地方的js文件不可以以app.js为后缀，否则会造成解密失败。</strong></p>
</blockquote>
<h2 id="app-doproj文件"><a href="#app-doproj文件" class="headerlink" title="app.doproj文件"></a>app.doproj文件</h2><p>整个APP项目的配置文件。<img src="http://doc.deviceone.net/web/img/20160306/fa46e724db2444c685eb3168acb8a43a.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Language: <span class="keyword">do</span>平台除了支持JavaScript还支持lua，可以在这里修改</div><div class="line">ID：<span class="keyword">do</span>应用的唯一标示，这个值是自动生成的唯一值，和开发者绑定。请不要随意修改。如果导入(<span class="keyword">import</span>)别人开发的app，会重新在你的开发者账号下重新生成一个唯一的id。</div><div class="line">DesignEnvironment：设计界面的宽/高值，设计的所有组件的宽高都是相对于这个值的相对值。这里可参考屏幕适配的文档.</div></pre></td></tr></table></figure>
<h1 id="设计APP页面"><a href="#设计APP页面" class="headerlink" title="设计APP页面"></a>设计APP页面</h1><h2 id="用户界面设计（通过设计视图修改ui文件）"><a href="#用户界面设计（通过设计视图修改ui文件）" class="headerlink" title="用户界面设计（通过设计视图修改ui文件）"></a>用户界面设计（通过设计视图修改ui文件）</h2><p>双击打开<code>index.ui</code>，我们可以看到可视化的设计视图和右边的组件列表，列表中默认有10几个布局、按钮、标签等常用组件，组件名称均以<code>do_</code>为前缀。<br><img src="http://doc.deviceone.net/web/img/20160302/711ad8e3e9b44786927ba62bba2c3873.png" alt=""></p>
<h3 id="组件的添加"><a href="#组件的添加" class="headerlink" title="组件的添加"></a>组件的添加</h3><p>我们以最简单的<code>标签</code>组件为例，简单讲一下。<br>从组件列表中找到<code>do_Label</code>，拖拽到设计视图的ui界面中。这样就完成了ui组件的添加。</p>
<h3 id="组件属性的设置"><a href="#组件属性的设置" class="headerlink" title="组件属性的设置"></a>组件属性的设置</h3><p>现在这个被“实例化”的ui组件具有一些默认的属性，我们要对界面进行设计，实际就是修改ui组件的属性。</p>
<p>之前的文章中我们讲过，ui组件的属性分为基本属性和特有属性，基本属性如id、坐标（x, y）、大小(width, height)、背景（bgcolor）等，特有属性则是本组件特有的属性。</p>
<p>组件支持哪些属性，分别是什么含义，可以查阅该组件的官方文档。</p>
<p>对组件的属性进行设置，需要<strong>先选中这个组件</strong>。</p>
<p>选中<code>do_Label</code>组件，设置它的<code>bgColor</code>属性为<code>00FF00FF</code>(前六位表示颜色，后2位表示透明值)，可以看到Label的背景变成了绿色。</p>
<p>相信这一部分很容易理解。</p>
<h3 id="新建用户界面文件"><a href="#新建用户界面文件" class="headerlink" title="新建用户界面文件"></a>新建用户界面文件</h3><p>如果要新建一个用户界面，则只需在<code>Script Explorer</code>面板中选中<code>source/view</code>目录，右键<code>new</code>-<code>UI File</code>，在弹出的对话框中设置好文件名，点击<code>OK</code>即可，立马生成一对新的<code>ui</code>和<code>ui.js</code>文件。</p>
<h2 id="程序逻辑设计（修改ui-js文件代码）"><a href="#程序逻辑设计（修改ui-js文件代码）" class="headerlink" title="程序逻辑设计（修改ui.js文件代码）"></a>程序逻辑设计（修改ui.js文件代码）</h2><p>通过对ui文件只能完成APP用户界面的实现（将设计稿变为真正能够在手机上使用的界面，而非效果图），但是若要想APP真的能用，必须进行程序逻辑的设计，也就是 “写代码”。<br>双击打开<code>index.ui</code>对应的<code>index.ui.js</code>文件，可以看到一个<code>javascript</code>代码编辑器，文件中已经自动生成了一些初始代码。</p>
<p>现在我们来修改一行代码，将<code>Hello World</code>修改为<code>Hello DeviceOne</code>。<br><img src="http://doc.deviceone.net/web/img/20160302/6a3495701d084c1585d840bc1755527c.png" alt=""><br>代码什么意思呢，就是点击界面中的<code>btn_hello</code>按钮，会alert（提醒、警告）出一个信息。</p>
<p>这是怎么实现的呢？我们不得不谈谈DeviceOne的组件机制。</p>
<p>在前面我们讲过如何给界面添加ui组件，但是DeviceOne里的组件不止这种能够“看得见摸得着”的ui组件，还有两种，分别是MM组件和SM组件。</p>
<h2 id="组件简单介绍"><a href="#组件简单介绍" class="headerlink" title="组件简单介绍"></a>组件简单介绍</h2><p>实际上，Device One官方所称的 “可以利用DeviceOne快速搭建应用，就像搭积木一样简单”，这一切都建立在它的<strong>组件机制</strong>上。</p>
<blockquote>
<p>DeviceOne根据Android，IOS，Winphone的SDK抽象了一套统一的javascirpt库，把所有组件分三种类型(UI,MM,SM)，这三种组件都有自己的属性，事件，方法，其他所有组件(目前大概有90+)都是这三种组件的子类，继承了父类的属性，事件和方法。应用开发者只需要了解基本的javascipt知识和我们提供的这套API规范，就可以开始开发移动应用了。</p>
</blockquote>
<p>官方文档<a href="http://doc.deviceone.net/web/doc/detail_course/modules.htm" target="_blank" rel="external">组件概述</a>讲解十分详细。在这里对三种组件进行一个简单的介绍。</p>
<h3 id="三种组件简介"><a href="#三种组件简介" class="headerlink" title="三种组件简介"></a>三种组件简介</h3><h4 id="UI-User-Interface-组件"><a href="#UI-User-Interface-组件" class="headerlink" title="UI(User Interface) 组件"></a>UI(User Interface) 组件</h4><p>页面上的控件,只要能放在页面展示出来的,能在设计器中可视化编辑属性的,就是UI。如 Button 、 ImageView、 Label 等.</p>
<p>要想获取或构建UI类组件的实例，要通过ui对象的id，id是一个ui对象的id属性值。这个id值由开发者来定义，在属性面板中就可设置，可以是任何字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = ui(<span class="string">"button-id"</span>);</div><div class="line">    <span class="keyword">var</span> imageview = ui(<span class="string">"imageview-id"</span>);</div><div class="line">    <span class="keyword">var</span> listview = ui(<span class="string">"listview-id1"</span>);</div><div class="line">    <span class="keyword">var</span> label = ui(<span class="string">"aaa"</span>);</div><div class="line">    ...</div></pre></td></tr></table></figure>
<h4 id="SM-Singleton-Modle-组件"><a href="#SM-Singleton-Modle-组件" class="headerlink" title="SM(Singleton Modle) 组件"></a>SM(Singleton Modle) 组件</h4><p>单例的组件,主要实现对原生单例API的封装, 如 Global 、 App、 Page、 Storage 、 Device 等。这些组件在整个app中就只有一个对象。它的方法更像是我们其它语言常用的静态方法。<br>需要通过组件的名称来获取或构建SM类组件的实例，不过因为是单例，只有第一次调用sm函数是构建，以后再调用就是获取已经构建好的对象了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> camera = sm(<span class="string">"do_Camera"</span>);</div><div class="line">    <span class="keyword">var</span> app = sm(<span class="string">"do_App"</span>);</div><div class="line">    ...</div></pre></td></tr></table></figure>
<h4 id="MM-Multiton-Modle-组件"><a href="#MM-Multiton-Modle-组件" class="headerlink" title="MM(Multiton Modle) 组件"></a>MM(Multiton Modle) 组件</h4><p>多实例组件, 对原生的多实例API的封装。如 SQLite 、 Http 、 Animation 等。在整个app中可以new多个对象。<br>可以通过MM组件的名称，id以及作用域来创建或者获取对象.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建一个作用域在App级别的do_Http组件的对象，它的id是http_id1,</span></div><div class="line"><span class="comment">//如果在这个作用域里已经有这个id的对象，则不会创建新的，而是返回已有的对象</span></div><div class="line">    <span class="keyword">var</span> http = mm(<span class="string">"do_Http"</span>);<span class="comment">//缺省在当前page作用域</span></div><div class="line">    <span class="keyword">var</span> http = mm(<span class="string">"do_Http"</span>,<span class="string">"http_id1"</span>,<span class="string">"app"</span>);</div><div class="line">    <span class="keyword">var</span> animation = mm(<span class="string">"do_Animation"</span>,<span class="string">"anim_id1"</span>,<span class="string">"page"</span>);</div><div class="line">    ...</div></pre></td></tr></table></figure>
<h3 id="属性的访问"><a href="#属性的访问" class="headerlink" title="属性的访问"></a>属性的访问</h3><p>UI/MM 都定义了属性. 其中ui的属性可以在do studio的可视化界面里直接修改，属性值保存在 *.ui 文件里。<br>属性的访问和设置通过js代码有以下的两种访问方式：</p>
<ul>
<li>以属性名访问</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = ui(<span class="string">"button-id"</span>);   <span class="comment">//获取实例</span></div><div class="line"><span class="keyword">var</span> txt = buttton.text;         <span class="comment">//获取Text属性</span></div><div class="line">button.text = <span class="string">"设置Text属性"</span>     <span class="comment">//设置Text属性</span></div><div class="line"><span class="keyword">var</span> bgc = button.bgColor;       <span class="comment">//获取bgColor属性</span></div><div class="line">button.bgColor = <span class="string">"#FFFFFFEE"</span>    <span class="comment">//设置bgColor属性</span></div></pre></td></tr></table></figure>
<ul>
<li>以get/set方法访问属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = ui(<span class="string">"button-id"</span>);          <span class="comment">//获取实例</span></div><div class="line"><span class="keyword">var</span> txt = buttton.get(<span class="string">"text"</span>);         <span class="comment">//获取Text属性</span></div><div class="line">button.set(<span class="string">"text"</span>, <span class="string">"设置Text属性"</span>)      <span class="comment">//设置Text属性</span></div><div class="line"><span class="keyword">var</span> bgc = buttton.get(<span class="string">"bgColor"</span>);      <span class="comment">//获取bgColor属性</span></div><div class="line">button.set(<span class="string">"bgColor"</span>, <span class="string">"#FFFFFFEE"</span>);    <span class="comment">//设置bgColor属性</span></div><div class="line"><span class="comment">/*** get/set 方法可批量 获取/设置 ***/</span></div><div class="line"><span class="keyword">var</span> g = button.get([<span class="string">"text"</span>, <span class="string">"bgColor"</span>]); <span class="comment">// g == &#123;text : "获取Text属性", bgColor : "#FFFFFFEE"&#125;;</span></div><div class="line">button.set(&#123;<span class="attr">text</span> : <span class="string">"设置Text属性"</span>, <span class="attr">bgColor</span> : <span class="string">"#FFFFFFEE"</span>&#125;);</div></pre></td></tr></table></figure>
<p>MM的属性访问方式与UI完全一致.</p>
<p>UI类型的属性还分为二种类型，OnlyDesign和Always</p>
<ul>
<li>Always:表示可以通过脚本代码来设置，如上面的示例代码，也能通过设计器的属性设置界面来设置。</li>
<li>OnlyDesign:表示只能通过设计器的属性设置界面来设置，不能通过代码来动态修改。</li>
</ul>
<h3 id="方法的调用"><a href="#方法的调用" class="headerlink" title="方法的调用"></a>方法的调用</h3><blockquote>
<p>UI/SM/MM 都具有方法.并且,方法包含两种类型 : 同步方法/异步方法</p>
</blockquote>
<h4 id="同步方法"><a href="#同步方法" class="headerlink" title="同步方法"></a>同步方法</h4><p>同步方法一般执行非耗时操作，立即返回执行结果。如 UI/MM 的 get/set 都属于同步方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> global = sm(<span class="string">"do_Global"</span>);</div><div class="line">    global.setMemory(<span class="string">"str0"</span>, &#123;<span class="attr">demo</span> : [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]&#125;);</div><div class="line">    <span class="keyword">var</span> str0 = global.getMemory(<span class="string">"str0"</span>);</div><div class="line">    <span class="comment">//setMemory/getMemory 执行结束立即返回结果, 都是同步方法.</span></div><div class="line">    <span class="comment">//更多详见各个模块的API.</span></div></pre></td></tr></table></figure>
<h4 id="异步方法"><a href="#异步方法" class="headerlink" title="异步方法"></a>异步方法</h4><p>异步方法一般是因为需要执行耗时操作,操作结束后会调用注册的回调函数,并将结果以回调函数的第一参数返回.异步方法的最后一个参数是一个回调函数(function)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> storage = sm(<span class="string">"do_Storage"</span>);</div><div class="line">    storage.getFiles(<span class="string">"data://demo/"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">        <span class="comment">//data == ["aaa.txt","bbb.json", "ccc.x"];</span></div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//更多详见各个模块的API.</span></div></pre></td></tr></table></figure>
<h4 id="方法的调用格式"><a href="#方法的调用格式" class="headerlink" title="方法的调用格式"></a>方法的调用格式</h4><ul>
<li>多参数平铺调用(以上的示例都是这样的)</li>
<li>参数哈希式(双参数式)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//假设 : 函数 Do.demo 有4个参数 a, b, c, d 和 回调 f , 并且 c, d 两个参数可选:</span></div><div class="line">    <span class="comment">//0. 参数平铺:</span></div><div class="line">        Do.demo( a, b , c , d , f)</div><div class="line">        Do.demo( a, b , c , f)</div><div class="line">        Do.demo( a, b , f)</div><div class="line">    <span class="comment">//1. 散列式:</span></div><div class="line">        Do.demo(&#123;</div><div class="line">            <span class="attr">a</span> : a,</div><div class="line">            <span class="attr">b</span> : b,</div><div class="line">            <span class="attr">c</span> : c,</div><div class="line">            <span class="attr">d</span> : d</div><div class="line">        &#125;, f)</div><div class="line">        Do.demo(&#123;</div><div class="line">            <span class="attr">a</span> : a,</div><div class="line">            <span class="attr">b</span> : b,</div><div class="line">            <span class="attr">c</span> : c</div><div class="line">        &#125;, f)</div><div class="line">        Do.demo(&#123;</div><div class="line">            <span class="attr">a</span> : a,</div><div class="line">            <span class="attr">b</span> : b</div><div class="line">        &#125;, f)</div></pre></td></tr></table></figure>
<h4 id="实例说明"><a href="#实例说明" class="headerlink" title="实例说明"></a>实例说明</h4><p>以App.openPage方法 具体说明一下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">var app = sm("do_App");</div><div class="line">    do_app.openPage(</div><div class="line">            "source://view/index.ui",  //要打开的页面路径</div><div class="line">            &#123; demo : [1,2,3,4] &#125;,       //要传递的数据</div><div class="line">            "fade",                       //过场动画类型</div><div class="line">            "default",                   //打开页面后的键盘模式</div><div class="line">            function(data ,e)&#123;</div><div class="line">                /*do something*/</div><div class="line">            &#125;);</div><div class="line">    /</div><div class="line">    *以上就是全参数式, 这样的写法参数的顺序要严格按照 API 给定的顺序输入.</div><div class="line">    *如果是异步方法, 最后一个参数应是回调函数.</div><div class="line">    */</div><div class="line">    //上面的例子中, 除了第一个参数( 要打开的页面路径 ) 外, 其他参数都可选.</div><div class="line">    app.openPage("source://view/index.ui", function(data)&#123;</div><div class="line">        /*do something*/</div><div class="line">    &#125;);</div><div class="line">    //上面的的例子简洁了许多. 但是如果需求是要求写入大量的参数,明显这种方式的可读性还是很差的.</div><div class="line">    //所以我们也为这样的需求量身定做了第二套调用方案:</div><div class="line">    app.openPage( &#123;</div><div class="line">              source : "source://view/index.ui",</div><div class="line">              data : "",</div><div class="line">              animationType : "",</div><div class="line">              keyboardMode : "default"</div><div class="line">          &#125;,</div><div class="line">          function(data ,e)&#123;</div><div class="line">                  /*do something*/</div><div class="line">          &#125;);</div><div class="line">     // 这种方案增强了代码的可读性,第一个参数是一个hash表, (如果是异步方法 第二个是一个回调函数)</div><div class="line">     // 注意, 回调函数不能放在第一个参数当中...</div><div class="line">    //可以根据自己的喜好和习惯自行选择.</div></pre></td></tr></table></figure>
<h3 id="事件的订阅／触发和注销"><a href="#事件的订阅／触发和注销" class="headerlink" title="事件的订阅／触发和注销"></a>事件的订阅／触发和注销</h3><p>UI/SM/MM 都定义了事件。 每个组件所支持的事件都在组件API上做了阐述。比如：</p>
<ul>
<li>do_Button : touch/touchUp/touchDown</li>
<li>do_Page : loaded</li>
</ul>
<h4 id="订阅事件-on"><a href="#订阅事件-on" class="headerlink" title="订阅事件(on)"></a>订阅事件(on)</h4><p>使用组件的<code>on</code>方法。语法如下：<br><br><code>对象.on();</code></p>
<p>订阅的事件可以是API支持的事件(如touch) </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> nf = sm(<span class="string">"do_Notification"</span>);</div><div class="line"><span class="keyword">var</span> btn_hello = ui(<span class="string">"btn_hello"</span>);</div><div class="line"></div><div class="line">btn_hello.on(<span class="string">"touch"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	nf.alert(<span class="string">"Hello World !!!!!"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>也可以是自定义的事件( 如touch001)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> nf = sm(<span class="string">"do_Notification"</span>);</div><div class="line"><span class="keyword">var</span> btn_hello = ui(<span class="string">"btn_hello"</span>);</div><div class="line"></div><div class="line">btn_hello.on(<span class="string">"touch001"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	nf.alert(<span class="string">"Hello World !!!!!"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>如果是组件支持的事件, 组件会根据自身当前状态自动触发，也可通过<code>fire</code>方法手动触发。如果是自定义事件，则必须通过fire`方法手动触发。</p>
<h4 id="触发事件-fire"><a href="#触发事件-fire" class="headerlink" title="触发事件(fire)"></a>触发事件(fire)</h4><p>使用组件的<code>fire</code>方法。语法如下：<br><br><code>对象.fire();</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">page.on(<span class="string">"xxxxx"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">     <span class="comment">/*do something*/</span></div><div class="line"> &#125;);</div><div class="line"> page.fire(<span class="string">"xxxxx"</span>);</div><div class="line"> page.fire(<span class="string">"xxxxx"</span>, &#123; <span class="attr">demo</span> : <span class="number">1</span>, <span class="attr">demo2</span> : <span class="literal">false</span> , <span class="attr">demo3</span>: <span class="string">"xx?xx"</span>&#125;);</div><div class="line"> <span class="comment">//fire方法传递两个参数,第一个参数是事件名称, 第二个参数是需要传递的数据(此参数可忽略).</span></div><div class="line"> <span class="comment">//事件响应时,第二个参数的值,会传递到订阅时( on方法 )的回调函数的第一个参数上.</span></div></pre></td></tr></table></figure>
<h4 id="注销事件"><a href="#注销事件" class="headerlink" title="注销事件"></a>注销事件</h4><p>使用组件的<code>off</code>方法。语法如下：<br><br><code>对象.off();</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">button.off(<span class="string">"touch"</span>);</div><div class="line">page.off(<span class="string">"xxxxx"</span>);</div></pre></td></tr></table></figure>
<h1 id="手机查看效果"><a href="#手机查看效果" class="headerlink" title="手机查看效果"></a>手机查看效果</h1><p>我们设计好界面和程序逻辑之后，想看到APP运行的实际效果，需要借助手机和调试终端APP。</p>
<h2 id="调试终端的安装"><a href="#调试终端的安装" class="headerlink" title="调试终端的安装"></a>调试终端的安装</h2><p>我们需要在手机上安装一个调试用的App，打开<a href="http://doc.deviceone.net/web/doc/env/debug_app.htm" target="_blank" rel="external">这里</a>扫描里面二维码安装一个doDebugger的App，Android，iOS手机都可以，windows和winphone版本不支持二维码扫描安装，这一课暂时不提。安装完如下图。这里提一下，这个调试App是可以定制的，这里暂时不详细解释。<br><img src="http://doc.deviceone.net/web/img/20160302/8955a97a41b84639a2c5bac87c0e8966.png" alt=""></p>
<h2 id="开发端与调试终端的关联"><a href="#开发端与调试终端的关联" class="headerlink" title="开发端与调试终端的关联"></a>开发端与调试终端的关联</h2><p>回到IDE中的<code>Service</code>选项卡右键点击<code>Create</code>按钮，如果弹出一个选择窗口，请选择刚创建好的项目。创建后，记录下显示的<code>ip地址</code>和<code>port</code>号。请确保<code>state</code>是<code>Running</code>。<br><img src="http://doc.deviceone.net/web/img/20160302/36a249048c344f1baa136c0eb513e3c1.png" alt=""><br><img src="http://doc.deviceone.net/web/img/20160302/79ece117ba814b339d38bbc93dd74a07.png" alt=""><br>回到手机，打开doDebugger这个app，在服务地址处输入刚才我们记录下的地址和端口。请确保手机和电脑在同一网段。然后点击更新,把代码从电脑上同步到手机上。如果更新提示失败，请参考<a href="http://bbs.deviceone.net/forum.php?mod=viewthread&amp;tid=479&amp;extra=page%3D1" target="_blank" rel="external">这里</a>。<br><img src="http://doc.deviceone.net/web/img/20160302/12eae3c7225c4481bc0144932b785c3a.png" alt=""></p>
<h2 id="查看真机效果"><a href="#查看真机效果" class="headerlink" title="查看真机效果"></a>查看真机效果</h2><p>我们点击进入，就可以看到我们在设计器上设计的效果，点击按钮，会弹出Hello DeviceOne。</p>
<p>在IDE上可以继续修改代码，修改UI，然后再次点击<code>更新</code>按钮和<code>进入</code>按钮就可以实时的看到开发的效果。一直到这个App完成所有你需要达到的功能。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/10/deviceone-ch1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="芬奇妞">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NewVinci">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/10/deviceone-ch1/" itemprop="url">
                  《DeviceOne移动应用开发》（一）开发环境的搭建与使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-10T10:53:52+08:00">
                2017-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/" itemprop="url" rel="index">
                    <span itemprop="name">系列教程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/移动应用开发/" itemprop="url" rel="index">
                    <span itemprop="name">移动应用开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>   DeviceOne平台在官方文档中被简称do平台，许多组件名称也是以“do_”开头命名的，在我们的教程中会沿用这个简称。</p>
<p>do平台的主要开发工作围绕官方提供的一个叫做DeviceOne Studio的IDE（集成开发环境的英文缩写）开展的，小白们可以将其类比为VS studio，Dreamweaver等IDE。<br>这个IDE基于Eclipse RCP（富客户端平台Rich client platform的缩写）开发，基本操作十分相似。这个IDE是跨平台的，目前支持Windows和Mac两个系统。</p>
<h2 id="IDE的下载与安装"><a href="#IDE的下载与安装" class="headerlink" title="IDE的下载与安装"></a>IDE的下载与安装</h2><p>IDE的下载十分简单。进入<a href="http://doc.deviceone.net/web/doc/env/ide.htm" target="_blank" rel="external">http://doc.deviceone.net/web/doc/env/ide.htm</a>即可下载。<br>如果你记不住这个网址，有以下方法：</p>
<ol>
<li>进入DeviceOne<a href="http://www.deviceone.net" target="_blank" rel="external">官网</a>（百度一下，你就找到）；<br><img src="/uploads/deviceone.jpg" alt="官网"></li>
<li>点击”Get Started” 进入<a href="http://study.deviceone.net" target="_blank" rel="external">新的页面</a>，将页面下拉，出现相关下载按钮。<img src="/uploads/download1.jpg" alt="开始使用"></li>
<li>点击“开发IDE”即可进入<a href="http://doc.deviceone.net/web/doc/env/ide.htm" target="_blank" rel="external">下载页面</a>。<img src="/uploads/download2.jpg" alt="下载"></li>
<li>选择需要下载的安装包版本即可，最新版本的安装包中内嵌JDK，一般不会出现java相关问题，安装包大小在400M以内（官方文档比较陈旧，说法有些不准确），估计随着平台的成熟这个安装包还会继续增大。</li>
</ol>
<p>安装过程与其他软件没有什么区别，有几点需要注意：</p>
<ul>
<li>不要将安装目录和workspace目录设置在安全级别较高的目录下，以免引起不必要的麻烦。</li>
<li>在Windows平台下，不要用winrar解压，用winzip或者7z之类的工具解压。</li>
<li>最好将安装包解压到一个不是很深的根目录中。</li>
</ul>
<h2 id="IDE的使用"><a href="#IDE的使用" class="headerlink" title="IDE的使用"></a>IDE的使用</h2><blockquote>
<p>这一部分首先作为了解，在实际的使用过程中会逐步熟悉对IDE的操作。</p>
</blockquote>
<p>下图是do studio IDE的主界面，其开发基于Eclipse RCP，因此操作非常相似。<br><img src="/uploads/dostudio.png" alt=""><br>其常用功能如下：</p>
<h3 id="应用工程管理"><a href="#应用工程管理" class="headerlink" title="应用工程管理"></a>应用工程管理</h3><p>如新建项目，导入项目等。可以使用菜单命令、工具栏按钮和右键菜单命令等不同的方式实现。</p>
<ol>
<li>新建应用：打开 IDE，第一步就是新建应用，目前支持javascript和lua两种语言。可使用<code>file</code>-&gt;<code>new</code>-&gt;<code>DeviceOne Project</code>命令实现。</li>
<li>导入应用：如果想要打开别人开发的应用的源码，可使用<code>file</code>-&gt;<code>import</code>命令实现。</li>
</ol>
<h3 id="工程代码管理"><a href="#工程代码管理" class="headerlink" title="工程代码管理"></a>工程代码管理</h3><p>主要是利用<code>Script Explorer</code>面板进行操作。</p>
<ol>
<li>文件导航：采用树状结构管理一个工程下的所有代码和数据文件。</li>
<li>新建文件：选中一个目录节点，可以在当前目录下新建文件，IDE支持多种格式的文件类型。</li>
<li>文件操作：包括文件的删除、重命名、复制、移动等常用操作。</li>
</ol>
<h3 id="UI设计"><a href="#UI设计" class="headerlink" title="UI设计"></a>UI设计</h3><p>UI设计需要用到的面板有<code>UI可视化设计区</code>、<code>Components</code>、<code>Outline</code>、<code>Properties</code>等面板。</p>
<ol>
<li>组件列表（<code>Components</code>）：在<code>Script Explorer</code>面板中双击一个ui文件，即可打开UI设计视图，在组件列表中可以看到这个应用可使用的UI组件，通过鼠标拖拽组件至设计区。新建一个应用后在组件列表中会有缺省的10多个ui组件，如果需要更多组件，需要点击<code>应用配置</code>按钮，然后添加更多的组件。添加结束后，还需要点击<code>应用同步</code>按钮.<img src="/uploads/ui1.png" alt=""></li>
<li>UI结构树（<code>Outline</code>）：IDE将ui文件内的组件可视化成一个结构树，从根节点开始，包含子节点，如果子节点是容器内节点，还可以再包含子节点。另外节点右键有菜单，可删除，复制，粘帖等常用功能。如果节点是容器节点，右键菜单还有“增加”功能，增加一个子组件到这个容器下。另外还支持鼠标拖拽功能。</li>
<li>属性设置（<code>Properties</code>）：在设计区或者UI结构树上选取一个UI组件对象，可以修改它的base properties(基础属性)和special properties(特有属性)，其中基础属性是所有UI组件都具有的属性，特有属性是每个独立的UI组件特有的属性。很多属性（不是所有的)一修改马上就能在设计区实时看到修改后的效果。</li>
</ol>
<h3 id="代码编辑"><a href="#代码编辑" class="headerlink" title="代码编辑"></a>代码编辑</h3><ol>
<li>编辑器基础功能：IDE提供了常用编辑器的基本功能，包括双击js或lua文件打开对应的文本编辑页面，双击页签关闭分页。工具栏里的功能包括Eclipse常用的编辑器功能。</li>
<li>自动提示：编辑器提供了好几种代码自动提示功能，比如补全变量名，补全ui的id，提示属性，事件，方法，回车补全函数参数集合等，快捷键的设置也和Eclipse标准一致。</li>
</ol>
<h3 id="真机调试"><a href="#真机调试" class="headerlink" title="真机调试"></a>真机调试</h3><ol>
<li>调试服务: 可以使用官方提供的调试终端应用（也可以自己打包生成）进行开发过程中的调试。将调试终端应用安装到你的手机上，并保证调试终端（你的手机）和IDE（你开发APP用的电脑）在同一网段，即可进行调试。</li>
<li>设计器能接受到手机端发送的调试日志，包括运行时的异常，包括用户调用<code>deviceone.print</code>方法传过来的自定义日志，需确保手机上的调试终端把调试开关打开。<br><img src="/uploads/debug1.png" alt=""><br>除了print外，用户还可以通过调用do_Notification.alert和toast来弹出提示窗口来调试数据。</li>
</ol>
<p>官方调试终端安装包下载地址为<a href="http://doc.deviceone.net/web/doc/env/debug_app.htm" target="_blank" rel="external">http://doc.deviceone.net/web/doc/env/debug_app.htm</a>。</p>
<h3 id="云打包"><a href="#云打包" class="headerlink" title="云打包"></a>云打包</h3><ol>
<li>调试终端打包：用户调试的时候可以选择自己想要的组件，定制化生成调试终端安装包。点击工具栏的<code>调试版本</code>按钮。</li>
<li>应用开发基本上都是在用调试终端调试代码，一旦应用功能完后需要通过打成一个正式的安装包，有自己的图标，名称，签名等等，可以上传官方的Appstore，可以给最终用户下载使用。只需点击工具栏的<code>发布版本</code>按钮。<br><img src="/uploads/pack1.png" alt=""></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/08/deviceone_intro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="芬奇妞">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NewVinci">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/08/deviceone_intro/" itemprop="url">
                  《DeviceOne移动应用开发》课程导语
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-08T13:14:35+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/" itemprop="url" rel="index">
                    <span itemprop="name">系列教程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系列教程/移动应用开发/" itemprop="url" rel="index">
                    <span itemprop="name">移动应用开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这一学期给学生上一个叫做《移动应用产品设计》的课程。讲实在话，这个课程不同专业背景的老师上，会有不同的教学内容。分析实际情况，我希望学生能作出一个APP产品来。但我的学生并不是学软件工程或计算机的，如果让他们开发原生APP，那几乎是异想天开。但他们之前上过Web前端的课程，学了点儿Javascript（后来的事实证明他们全忘光了，好像老师从来没有讲过一样，无奈我又补充了一些Javascript基础知识），具有一定的开发基础。我就试着找这样一个平台。</p>
<p>曾经想要用微信小程序，但是当时小程序还没有开放给个人用户，而且是个新生事物，我不能贸然将一个课程建设在一个未知的领域上，虽然我很看好。</p>
<p>在准备课程的过程中，我发现了一个适合我们学生的平台，这就是DeviceOne，号称是跨平台、低成本、纯原生（实际上是对原生接口进行了封装）的APP开发服务，重点是，支持Javascript，这就不需要任何的技术迁移，而且使用这个平台，非常简单，学生之需要了解它的基本工作原理，像搭积木一样就可以将应用做出来，对于我的教学目标来说，足够了！</p>
<p>本教程是我在上课过程中的一个梳理，供有兴趣的朋友们参考。初步定为八讲，其实就是一个入门教程。</p>
<ul>
<li><a href="https://newvinci.github.io/2017/04/10/deviceone-ch1/" target="_blank" rel="external">第一讲 开发环境的搭建与使用</a></li>
<li>第二讲 <a href="https://newvinci.github.io/2017/04/11/deviceone-ch2/" target="_blank" rel="external">创建你的第一个移动应用
</a></li>
<li>第三讲 <a href="https://newvinci.github.io/2017/04/11/deviceone-ch3/" target="_blank" rel="external">搭建APP页面框架——布局组件的使用</a></li>
<li>第四讲 <a href="https://newvinci.github.io/2017/04/19/deviceone-ch4/" target="_blank" rel="external">完善APP页面框架——容器组件的使用</a></li>
<li>第五讲 </li>
<li>第六讲 </li>
<li>第七讲 </li>
<li>第八讲 </li>
</ul>
<p>后续也可能会推送高阶教程，欢迎大家关注。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="芬奇妞" />
          <p class="site-author-name" itemprop="name">芬奇妞</p>
           
              <p class="site-description motion-element" itemprop="description">It doesn't matter.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://baixin.io/" title="潘柏信" target="_blank">潘柏信</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.ruanyifeng.com/blog/" title="阮一峰的网络日志" target="_blank">阮一峰的网络日志</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://theme-next.iissnan.com/" title="nexT" target="_blank">nexT</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://hexo.io/zh-cn/" title="Hexo官网" target="_blank">Hexo官网</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.liaoxuefeng.com" title="廖雪峰的官方网站" target="_blank">廖雪峰的官方网站</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">芬奇妞</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
